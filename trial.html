<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Welcome | Stockchart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />

    <!-- Favicons -->
    <link href="assets/Logo/colored.png" rel="icon">
    <link href="assets/Logo/colored.png" rel="apple-touch-icon">

    <!-- App css -->
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" id="light-style" />
    <link href="assets/css/app-dark.min.css" rel="stylesheet" type="text/css" id="dark-style" />


    <!-- third party css -->
    <link href="assets/css/vendor/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" />
    <!-- Datatables css -->
    <link href="assets/css/vendor/dataTables.bootstrap5.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/vendor/responsive.bootstrap5.css" rel="stylesheet" type="text/css" />

    <!-- sweet alert -->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- third party css end -->

    <!-- third party scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- third part scripts end -->

    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <style>
        @media all and(max-width: 1200px) {
            .deskContent {
                visibility: visible;
                display: block;
            }

            .phoneContent {
                visibility: hidden;
                display: none
            }
        }

        @media all and(max-width: 768px) {
            .deskContent {
                display: none;
                visibility: hidden;
            }

            .phoneContent {
                display: block;
                visibility: visible;
            }
        }

        .sideNav {
            height: 100vh;
            width: 0;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #1E90FF;
            overflow-x: hidden;
            padding-top: 60px;
            transition: 0.5s;
        }

        .sideNav a {
            padding: 8px 8px 8px 32px;
            text-decoration: none;
            font-size: 25px;
            color: #000000;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans - serif;
            display: block;
            transition: 0.3s;
        }

        .sidenav a:hover {
            color: #f1f1f1;
        }

        .sideNav.closeBtn {
            position: absolute;
            padding-top: 1rem;
            right: 25px;
            font-size: 40px;
            margin-left: 50px;
            color: black;
        }

        .logo-name {
            display: flex;
            align-items: center;
        }

        .logo-name-wrapper {
            position: relative;
            margin-bottom: 1rem;
            display: flex;
            font-size: 1rem;
        }
    </style>
</head>

<body class="loading hide-menu" data-layout="full"
    data-layout-config='{"leftSideBarTheme":"dark", "layoutBoxed":false, "leftSidebarCondensed":false, "leftSidebarScrollable":false,"darkMode":false, '>
    <!-- Begin page -->
    <div class="wrapper">
        <!-- ========== Left Sidebar Start ========== -->
        <div class="deskContent">
            <div class="leftside-menu">

                <div class="left-side-menu">

                    <!-- LOGO -->

                    <a href="/index.html" class="logo text-center logo-light">
                        <span class="logo-lg">
                            <img src="assets/Logo/PM-White.png" alt="" height="60%" width="60%" max-width="500%"
                                style="padding-top: 10px;">
                        </span>

                        <span class=" logo-sm">
                            <img src="assets/Logo/WONDERFUL JOB.png" alt="" height="60%" width="60%" max-width="500%">
                        </span>
                    </a>
                    <br>
                    <br>
                    <!-- LOGO -->
                    <a href=" /index.html" class="logo text-center logo-dark">
                        <span class="logo-lg">
                            <img src="assets/Logo/PM-White.png" alt="" height="60%" width="60%" max-width="500%">
                        </span>
                        <span class=" logo-sm">
                            <img src="assets/Logo/WONDERFUL JOB.png" alt="" height="60%" width="60%" max-width="500%">
                        </span>
                    </a>

                    <div class=" h-100" id="left-side-menu-container" data-simplebar>

                        <!--- Sidemenu -->
                        <ul class="metismenu side-nav">

                            <li class="side-nav-title side-nav-item">Navigation</li>


                            <li class="side-nav-item">
                                <a data-bs-toggle="collapse" href="#sidebarDashboards" aria-expanded="false"
                                    aria-controls="sidebarDashboards" class="side-nav-link">
                                    <i class="uil-layer-group"></i>
                                    <span class="badge bg-success float-end">1</span>
                                    <span> Dashboards </span>
                                </a>
                                <div class="collapse" id="sidebarDashboards">
                                    <ul class="side-nav-second-level">
                                        <li>

                                            <a href="#"><i class=" uil-users-alt"></i>
                                                <span>USERS</span></a>
                                        </li>
                                    </ul>
                                </div>
                            </li>


                            <ul class="metismenu side-nav">
                                <li class="side-nav-item">
                                    <a href="/" class="side-nav-link">
                                        <i class="uil-globe"></i>

                                        <span> HOME </span>
                                    </a>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/index.html" class="side-nav-link">
                                        <i class="uil-home-alt  "></i>
                                        <span> Create An Index </span>
                                    </a>
                                <li class="side-nav-item">
                                    <a href="/pages-view_all.html" class="side-nav-link">
                                        <i class="dripicons-list "></i>
                                        <span> My Index List </span>
                                    </a>
                                </li>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/pages-followed_all.html" class="side-nav-link">
                                        <i class="dripicons-view-list-large "></i>
                                        <span> My Followed Index </span>
                                    </a>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/pages-watchlist.html" class="side-nav-link">
                                        <i class="dripicons-checklist "></i>
                                        <span> All Indices List </span>
                                    </a>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/profile/{{request.user}}" class="side-nav-link">
                                        <i class="dripicons-user-id"></i>
                                        <span> Profile </span>
                                    </a>
                                </li>
                            </ul>
                            <!-- End Sidebar -->

                            <!-- End Sidebar -->
                            <div class="clearfix"></div>
                        </ul>

                        <ul class="metismenu side-nav">

                            <li class="side-nav-title side-nav-item">Navigation</li>
                            <ul class="metismenu side-nav">
                                <li class="side-nav-item">
                                    <a href="/" class="side-nav-link">
                                        <i class="uil-globe"></i>

                                        <span> HOME </span>
                                    </a>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/index.html" class="side-nav-link">
                                        <i class="uil-home-alt  "></i>
                                        <span> Create An Index </span>
                                    </a>
                                <li class="side-nav-item">
                                    <a href="/pages-view_all.html" class="side-nav-link">
                                        <i class="dripicons-list "></i>
                                        <span> My Index List </span>
                                    </a>
                                </li>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/pages-followed_all.html" class="side-nav-link">
                                        <i class="dripicons-view-list-large "></i>
                                        <span> My Followed Index </span>
                                    </a>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/pages-watchlist.html" class="side-nav-link">
                                        <i class="dripicons-checklist "></i>
                                        <span> All Indices List </span>
                                    </a>
                                </li>
                                <li class="side-nav-item">
                                    <a href="/profile/{{request.user}}" class="side-nav-link">
                                        <i class="dripicons-user-id"></i>
                                        <span> Profile </span>
                                    </a>
                                </li>
                            </ul>
                            <!-- End Sidebar -->

                            <!-- End Sidebar -->
                            <div class="clearfix"></div>
                        </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <!-- Left Sidebar End -->

        <!-- ============================================================== -->
        <!-- Start Page Content here -->
        <!-- ============================================================== -->

        <div class="content-page">
            <div class="content">
                <!-- Topbar Start -->
                <div class="navbar-custom">
                    <ul class="list-unstyled topbar-menu float-end mb-0">
                        <li class="dropdown notification-list d-lg-none">
                            <a class="nav-link dropdown-toggle arrow-none" data-bs-toggle="dropdown" href="#"
                                role="button" aria-haspopup="false" aria-expanded="false">
                                <i class="dripicons-search noti-icon"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-animated dropdown-lg p-0">
                                <form class="p-3">
                                    <input type="text" class="form-control" placeholder="Search ..."
                                        aria-label="Recipient's username">
                                </form>
                            </div>
                        </li>

                        <li class="dropdown notification-list">
                            <a class="nav-link dropdown-toggle nav-user arrow-none me-0" data-bs-toggle="dropdown"
                                href="/profile/{{request.user}}" role="button" aria-haspopup="false"
                                aria-expanded="false">
                                <span class="account-user-avatar">
                                    <img src="{{profile.profile_picture.url}}" alt="" class="rounded-circle">
                                </span>
                                <span>
                                    <span class="account-user-name">JAY</span>
                                    <span class="account-position">USER</span>
                                </span>
                            </a>
                            <div
                                class="dropdown-menu dropdown-menu-end dropdown-menu-animated topbar-dropdown-menu profile-dropdown">
                                <!-- item-->
                                <div class=" dropdown-header noti-title">
                                    <h6 class="text-overflow m-0">Welcome !</h6>
                                </div>

                                <!-- item-->
                                <a href="/profile/{{request.user}}" class="dropdown-item notify-item">
                                    <i class="mdi mdi-account-circle me-1"></i>
                                    <span>My Account</span>
                                </a>

                                <!-- item-->
                                <a href="/pages-settings.html" class="dropdown-item notify-item">
                                    <i class="mdi mdi-account-edit me-1"></i>
                                    <span>Settings</span>
                                </a>

                                <!-- item-->
                                <a href="/contact" class="dropdown-item notify-item">
                                    <i class="mdi mdi-lifebuoy me-1"></i>
                                    <span>Support</span>
                                </a>

                                <!-- item-->
                                <a href="/logout" class="dropdown-item notify-item">
                                    <i class="mdi mdi-logout me-1"></i>
                                    <span>Logout</span>
                                </a>
                            </div>
                        </li>

                    </ul>
                    <button class="button-menu-mobile open-left">
                        <i class="mdi mdi-menu"></i>
                    </button>
                    <div class="mobile">
                        <span id="one" style="font-size:40px;cursor:pointer; margin-left: 10px;line-height: 70px;"
                            onclick="openNav()">&#9776;</span>
                        <span id="two" style="font-size:40px;cursor:pointer;margin-left: 10px;line-height: 70px;"
                            onclick="closeNav()">&#9776;</span>
                    </div>
                    <style>
                        #two {
                            display: none;
                        }

                        @media all and (max-width: 768px) {
                            .button-menu-mobile {
                                display: none;
                                visibility: hidden;
                            }
                        }

                        @media screen and (min-width: 769px) {
                            .mobile {
                                display: none;
                                visibility: hidden;
                            }
                        }
                    </style>


                    <div class="app-search dropdown d-none d-lg-block">

                        <form method="POST" action="/search/">

                            <div class="input-group">
                                <input list="datalist-search" type="text"
                                    class="form-control dropdown-toggle datalist-search list-group" name="input_search"
                                    placeholder="Search..." id="top-search">
                                <span class="mdi mdi-magnify search-icon"></span>
                                <div class="input-group-append">
                                    <button class="btn btn-primary" name="search" value="search" type="submit"
                                        style="background-color: #1E90FF;">Search</button>
                                </div>
                            </div>
                            <datalist id="datalist-search">
                                <option class="datalist-option" value=""></option>
                                <option class="datalist-option" value=""></option>
                                <option class="datalist-option" value=""></option>
                                <option class="datalist-option" value=""></option>
                                <option class="datalist-option" value=""></option>
                            </datalist>
                        </form>
                        <div class="dropdown-menu dropdown-menu-animated dropdown-lg" id="search-dropdown">
                            <!-- item-->
                            <div class="dropdown-header noti-title">
                                <h5 class="text-overflow mb-2">Filter<span class="text-danger"></span>
                                    Results
                                </h5>
                            </div>

                            <!-- item-->
                            <a href="/search/?filter=index" class="dropdown-item notify-item">
                                <i class="uil-notes font-16 mr-1"></i>
                                <span>Search by Index</span>
                            </a>

                            <!-- item-->
                            <a href="/search/?filter=stock" class="dropdown-item notify-item">
                                <i class="uil-life-ring font-16 mr-1"></i>
                                <span>Search by Stock</span>
                            </a>

                            <!-- item-->
                            <a href="/pages-settings.html" class="dropdown-item notify-item">
                                <i class="uil-cog font-16 mr-1"></i>
                                <span>Sort Indices by popualirty</span>
                            </a>
                            <div class="notification-list">

                            </div>
                        </div>
                    </div>

                </div>

                <div class="phoneContent">
                    <nav class="sideNav" id="mySidenav">
                        <!-- LOGO -->
                        <div class="left-side-menu">
                            <!--- Sidemenu -->
                            <ul class="metismenu side-nav">
                                <div class="logo-name-wrapper">
                                    <div class="logo-name">
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <a href="/index.html" class="text-center">
                                            <span class="logo-name">
                                                <img src="/assets/Logo/PM-White.png" alt="" height="60%" width="60%"
                                                    max-width="500%" style="padding-top: 30px;">
                                            </span>
                                        </a>
                                    </div>
                                </div>

                                <li class="side-nav-title side-nav-item">Navigation</li>

                                <ul class="metismenu side-nav">
                                    <li class="side-nav-item">
                                        <a href="/" class="side-nav-link">
                                            <i class="uil-globe"></i>

                                            <span> HOME </span>
                                        </a>
                                    </li>
                                    <li class="side-nav-item">
                                        <a href="/index.html" class="side-nav-link">
                                            <i class="uil-home-alt  "></i>
                                            <span> Create An Index </span>
                                        </a>
                                    <li class="side-nav-item">
                                        <a href="/pages-view_all.html" class="side-nav-link">
                                            <i class="dripicons-list "></i>
                                            <span> My Index List </span>
                                        </a>
                                    </li>
                                    </li>
                                    <li class="side-nav-item">
                                        <a href="/pages-followed_all.html" class="side-nav-link">
                                            <i class="dripicons-view-list-large "></i>
                                            <span> My Followed Index </span>
                                        </a>
                                    </li>
                                    <li class="side-nav-item">
                                        <a href="/pages-watchlist.html" class="side-nav-link">
                                            <i class="dripicons-checklist "></i>
                                            <span> All Indices List </span>
                                        </a>
                                    </li>
                                    <li class="side-nav-item">
                                        <a href="/profile/{{request.user}}" class="side-nav-link">
                                            <i class="dripicons-user-id"></i>
                                            <span> Profile </span>
                                        </a>
                                    </li>
                                </ul>
                                <!-- End Sidebar -->

                                <!-- End Sidebar -->
                                <div class="clearfix"></div>
                            </ul>
                        </div>
                    </nav>

                    <script>
                        function openNav() {
                            document.getElementById("mySidenav").style.width = "100%";
                            document.getElementById("two").style.display = "block";
                            document.getElementById("one").style.display = "none";
                        }

                        function closeNav() {
                            document.getElementById("mySidenav").style.width = "0";
                            document.getElementById("two").style.display = "none";
                            document.getElementById("one").style.display = "block";
                        }
                    </script>
                </div>
                <style>
                    #chartdiv {
                        width: 100%;
                        height: 500px;
                        max-width: 100%;
                    }

                    #chartdiv:before {
                        content: ' ';
                        position: absolute;
                        top: 10rem;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        background: url(/assets/Logo/Portfoliomeister-lightgray.png);
                        background-position: center;
                        background-repeat: no-repeat;
                        background-attachment: fixed;
                        z-index: -1;
                        max-width: 25;
                        height: auto;

                    }

                    #chartdiv1 {
                        width: 100%;
                        height: 300px;
                        max-width: 100%;

                    }

                    #chartdiv2 {
                        width: 100%;
                        height: 300px;
                        max-width: 100%;
                    }

                    @media screen and (max-width: 600px) {
                        #chartdiv {
                            width: 110%;
                            height: 500px;
                            max-width: 110%;
                        }
                    }
                </style>
                <!-- end Topbar -->
                <!-- Start Content-->
                <div class="container-fluid" id="main">
                    <!-- start page title -->
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12">
                                <div class="page-title-box">
                                    <div class="page-title-right">
                                        <ol class="breadcrumb m-0">
                                            <li class="breadcrumb-item">
                                                <a href="/index.html">Stock Charts</a>
                                            </li>
                                            <li class="breadcrumb-item active">View Indices</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <h4 class="header-title mb-3">Chart</h4>
                    <div class="row">
                        <div class="col-12">
                            <div class="card widget-inline">
                                <div class="card-body p-0">
                                    <div class="row g-0">
                                        <div class="col-sm-4 col-lg-4">
                                            <div class="card shadow-none m-0 border-start">
                                                <div class="card-body text-center">
                                                    <i class="uil-align-justify text-muted"
                                                        style="font-size: 18px;"></i>
                                                    <h3><span style="font-size: 18px;">Index Name</span></h3>
                                                    <p class="text-muted mb-0" style="font-size: 24px;">
                                                        {{input.Index_Name}}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-sm-4 col-lg-4">
                                            <div class="card shadow-none m-0 border-start">
                                                <div class="card-body text-center">
                                                    <i class="dripicons-graph-line text-muted"
                                                        style="font-size: 18px;"></i>
                                                    <h3><span style="font-size: 18px;">Current Price</span></h3>
                                                    <p class="text-muted mb-0" id="try" style="font-size: 24px;">

                                                        <script type="text/javascript">
                                                            var price_data = '{{price}}'.split(',');
                                                            document.getElementById("try").innerHTML = (parseFloat(price_data[price_data.length - 1]).toFixed(2));
                                                        </script>
                                                        Points
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-sm-4 col-lg-4">
                                            <div class="card shadow-none m-0 border-start">
                                                <div class="card-body text-center">
                                                    <i class="dripicons-graph-line text-muted"
                                                        style="font-size: 24px;"></i>
                                                    <h3><span style="font-size: 18px;">Percentage Change</span></h3>
                                                    <!-- <p style="font-size: 24px;"><span id="pc"> -->
                                                    <!-- <script>
                                var price_data = '{{price}}'.split(',');
                                document.getElementById("pc").innerHTML = ((1 - parseFloat(price_data[price_data.length - 1] / price_data[price_data.length - 2])) * 100).toFixed(2);
                              </script>% -->
                                                    <!-- </span> <i class="mdi mdi-arrow-up text-success"></i> -->
                                                    <!-- </p> -->

                                                    <div>
                                                        <!--dropdown list options-->
                                                        <button id="btn-color" type="button"
                                                            class="btn border border-light rounded-2"
                                                            onclick="changeColor()"
                                                            style="color: red; font-size: 20px;">
                                                            1 DAY 30%
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div> <!-- end row -->
                                    </div>
                                </div> <!-- end card-box-->
                            </div> <!-- end col-->
                        </div>

                        <div class="card">
                            <div class="card-body">
                                <!-- Delete Alert Modal -->
                                <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                    data-bs-target="#danger-alert-modal">DELETE
                                    INDEX!</button>
                                <div id="danger-alert-modal" class="modal fade" tabindex="-1" role="dialog"
                                    aria-hidden="true">
                                    <div class="modal-dialog modal-sm">
                                        <div class="modal-content modal-filled bg-danger">
                                            <div class="modal-body p-4">
                                                <div class="text-center">
                                                    <i class="dripicons-wrong h1"></i>
                                                    <h4 class="mt-2">Delete Index!</h4>
                                                    <p class="mt-3">Cras mattis consectetur purus sit amet fermentum.
                                                        Cras justo odio, dapibus ac
                                                        facilisis
                                                        in,
                                                        egestas eget quam.</p>
                                                    <button type="button" class="btn btn-light my-2"
                                                        data-bs-dismiss="modal">Continue</button>
                                                </div>
                                            </div>
                                        </div><!-- /.modal-content -->
                                    </div><!-- /.modal-dialog -->
                                </div><!-- /.modal -->
                                <script>
                                    am5.ready(function () {

                                        // Create root element
                                        // https://www.amcharts.com/docs/v5/getting-started/#Root_element
                                        var root = am5.Root.new("chartdiv");


                                        // Set themes
                                        // https://www.amcharts.com/docs/v5/concepts/themes/
                                        root.setThemes([
                                            am5themes_Animated.new(root)
                                        ]);


                                        // Create chart
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/
                                        var chart = root.container.children.push(am5xy.XYChart.new(root, {
                                            panX: true,
                                            panY: false,
                                            wheelX: "panX",
                                            wheelY: "zoomX",
                                            layout: root.verticalLayout
                                        }));

                                        chart.get("colors").set("step", 2);


                                        var valueAxisRenderer = am5xy.AxisRendererY.new(root, {
                                            opposite: true,
                                            pan: "zoom"
                                        });
                                        valueAxisRenderer.labels.template.setAll({
                                            centerY: am5.percent(100),
                                            maxPosition: 0.98
                                        });
                                        var valueAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
                                            renderer: valueAxisRenderer,
                                            height: am5.percent(70),
                                            maxDeviation: 1
                                        }));
                                        valueAxis.axisHeader.children.push(am5.Label.new(root, {
                                            // text: "Value",
                                            fontWeight: "bold",
                                            paddingBottom: 5,
                                            paddingTop: 5
                                        }));



                                        var dateAxisRenderer = am5xy.AxisRendererX.new(root, {
                                            pan: "zoom"
                                        });
                                        dateAxisRenderer.labels.template.setAll({
                                            minPosition: 0.01,
                                            maxPosition: 0.99
                                        });
                                        var dateAxis = chart.xAxes.push(am5xy.DateAxis.new(root, {
                                            groupData: true,
                                            maxDeviation: 0.5,
                                            baseInterval: {
                                                timeUnit: "day",
                                                count: 1
                                            },
                                            renderer: dateAxisRenderer
                                        }));
                                        dateAxis.set("tooltip", am5.Tooltip.new(root, {}));


                                        // Add series
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
                                        var valueSeries1 = chart.series.push(am5xy.LineSeries.new(root, {
                                            // name: 'XTD',
                                            valueYField: "price1",
                                            calculateAggregates: true,
                                            valueXField: "date",
                                            xAxis: dateAxis,
                                            yAxis: valueAxis,
                                            legendValueText: "{valueY}"
                                        }));

                                        var valueTooltip = valueSeries1.set("tooltip", am5.Tooltip.new(root, {
                                            getFillFromSprite: false,
                                            getStrokeFromSprite: true,
                                            getLabelFillFromSprite: true,
                                            autoTextColor: false,
                                            pointerOrientation: "horizontal",
                                            labelText: "{name}: {valueY} {valueYChangePercent.formatNumber('[#00ff00]+#,###.##|[#ff0000]#,###.##|[#999999]0')}%"
                                        }));
                                        valueTooltip.get("background").set("fill", root.interfaceColors.get("background"));

                                        // Add legend to axis header
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/legend-xy-series/
                                        var valueLegend = valueAxis.axisHeader.children.push(
                                            am5.Legend.new(root, {
                                                useDefaultMarker: true
                                            })
                                        );
                                        valueLegend.data.setAll([valueSeries1]);

                                        // Stack axes vertically
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Stacked_axes
                                        chart.rightAxesContainer.set("layout", root.verticalLayout);


                                        // Add cursor
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/
                                        chart.set("cursor", am5xy.XYCursor.new(root, {}))


                                        // Add scrollbar
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/
                                        var scrollbar = chart.set("scrollbarX", am5xy.XYChartScrollbar.new(root, {
                                            orientation: "horizontal",
                                            height: 50
                                        }));

                                        var sbDateAxis = scrollbar.chart.xAxes.push(am5xy.DateAxis.new(root, {
                                            groupData: true,
                                            groupIntervals: [{
                                                timeUnit: "week",
                                                count: 1
                                            }],
                                            baseInterval: {
                                                timeUnit: "day",
                                                count: 1
                                            },
                                            renderer: am5xy.AxisRendererX.new(root, {})
                                        }));

                                        var sbValueAxis = scrollbar.chart.yAxes.push(
                                            am5xy.ValueAxis.new(root, {
                                                renderer: am5xy.AxisRendererY.new(root, {})
                                            })
                                        );

                                        var sbSeries = scrollbar.chart.series.push(am5xy.LineSeries.new(root, {
                                            valueYField: "price1",
                                            valueXField: "date",
                                            xAxis: sbDateAxis,
                                            yAxis: sbValueAxis
                                        }));

                                        sbSeries.fills.template.setAll({
                                            visible: true,
                                            fillOpacity: 0.3
                                        });


                                        // Generate random data and set on series
                                        // https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Setting_data
                                        var data = [];
                                        var price_data = '{{price}}'.split(',');
                                        var date = '{{date}}'.split(',');

                                        for (var i = 0; i < price_data.length; i++) {
                                            data.push({ date: new Date(date[i]).getTime(), price1: Number(parseInt(price_data[i])) });
                                        }
                                        // console.log()
                                        // console.log(data)
                                        valueSeries1.data.setAll(data);
                                        // volumeSeries.data.setAll(data);
                                        sbSeries.data.setAll(data);

                                        // Make stuff animate on load
                                        // https://www.amcharts.com/docs/v5/concepts/animations/
                                        chart.appear(1000, 100);

                                    }); // end am5.ready()

                                </script>

                                <!-- HTML -->
                                <div id="chartdiv"></div>
                                <br>
                                <br>
                                <div class="row">
                                    <div class="col">
                                        <button type="submit button" class="btn btn-primary btn-rounded"
                                            onclick="CopyLink()" data-bs-toggle="popover" title="success!"
                                            data-bs-content="Link Succesfully Copied To Clipboard"
                                            style="background-color: #1E90FF; position: absolute; left: 170px; bottom: 3%;font-size: 12px;">
                                            <i class="mdi mdi-share-variant"></i>&nbsp<span>Share</span></button>


                                        <a href="/follow/{{input.Index_Code}}" class="btn btn-primary btn-rounded"
                                            type="submit button"
                                            style="background-color: #1E90FF; position: absolute; bottom: 3%;font-size: 12px;">
                                            <i class="mdi mdi-account-plus"></i>
                                            <span>Follow Index</span>
                                        </a>


                                        <a href="/unfollow/{{input.Index_Code}}" class="btn btn-primary btn-rounded"
                                            type="submit button"
                                            style="background-color: #1E90FF;position: absolute;  bottom: 3%;font-size: 12px;">
                                            <i class="mdi mdi-account-plus"></i>
                                            <span>Unfollow Index</span>
                                        </a>


                                        <a href="/edit/{{input.Index_Code}}" class="btn btn-secondary"
                                            type="submit button"
                                            style="font-size: 12px;bottom: 3%;position: absolute; right: 20px;">Edit
                                            Chart</a>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Bootstrap core JavaScript-->

            <script type="text/javascript">

                function setEditable(id) {
                    let el = document.getElementById(`weight${id}`)
                    el.removeAttribute('readonly')
                }

                var search_stocks = []
                //stocks index
                var nimeId = 1;
                //stocks counter
                var number_stocks = 1
                //stocks data array for each index
                var newinput = [
                    {
                        id: 0,
                        weight: 100,
                        edited: false
                    }
                ]

                function add_row(argument) {
                    // body...
                    number_stocks = number_stocks + 1
                    object = document.getElementById("additionals");
                    html = (`<div class="form-group form-inline row g-2 " id="nime${nimeId}">
                  <div class="mb-3 col-md-6">
                    <label for="option3">Enter the stock name:&nbsp;</label>
                    <input list="datalist-search" required id="stock${nimeId}" type="text" class="form-control form-control-user" step="any" name="StockName${nimeId}" oninput="myFunction(${nimeId})" placeholder="Stock Name" onkeyup="mySearch('stock${nimeId}')"
                      required></input>
                    <span class="form-text text-danger" id="error${nimeId}"> </span>
                    &nbsp;&nbsp;&nbsp;
                  </div>
                  <div class="form-group form-inline mb-3 col-md-6">
                    <label for="option3">Weight%:&nbsp;</label>
                    <input id="weight${nimeId}" type="number" class="form-control form-control-user" value="0" step="any" name="Weight${nimeId}" placeholder="Weight" onchange="handleweightinputonchange('weight${nimeId}')"onclick="setEditable(0)" readonly></input>&nbsp&nbsp
                    <br>
                      <span class=" dripicons-pencil" onclick="setEditable(0)"></span>
                      &nbsp;
                      Remove Stock: &nbsp;
                      <i class="dripicons-minus"
                        style="font-size:30px;" type="button" onclick="deleterow(${nimeId})"></i>
                      <br><br><br>
                      </div>
                      </div>`);
                    object.insertAdjacentHTML('beforeend', html);

                    newinput.push({
                        id: nimeId,
                        weight: 0,
                        edited: false
                    })
                    stock_id = "stock" + nimeId
                    search_stocks.push(stock_id)
                    console.log(search_stocks)
                    // redistribute weight
                    getweight()
                    //increment stock index
                    nimeId = nimeId + 1;
                }

                function deleterow(idToDelete) {
                    if (number_stocks < 2) {

                        // object = document.getElementById("error1")
                        // object.innerHTML = "You Must Have at Least One Stock!"
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'You MUST have at least 1 Stock!',
                            footer: '<a href="">Why do I have this issue?</a>'
                        })
                    }
                    //error

                    else {
                        var targetElement = document.getElementById('nime' + idToDelete);
                        // check whether element has any error
                        // check stock name has an error
                        // let errorElement = document.getElementById('error' + idToDelete)

                        // if the error element text length is more than 0, then there is an error
                        // if (errorElement.innerText.length > 0) {
                        //   // since the element is to be deleted, the error will also be gone therefore the button(if disabled) needs to be enabled
                        //   handleBtnDisable(false)
                        // }
                        // else {
                        //   handleBtnDisable(true)
                        // }

                        // remove element
                        targetElement.remove();
                        // reset input array
                        number_stocks = number_stocks - 1
                        // new stocks array 
                        var newinputarr = newinput.filter(function (input) {
                            if ((`nime${input.id}`) !== ('nime' + idToDelete)) {
                                return input
                            }
                        })

                        newinput = []
                        //repopulate global stocks array
                        newinput.push(...newinputarr)
                        //redistributing weight after deletion
                        var newweight = 100 / newinput.length

                        for (let index = 0; index < newinput.length; index++) {
                            newinput[index].weight = newweight
                        }
                        //injecting redistributed weight to DOM document
                        for (let index = 0; index < newinput.length; index++) {
                            if (document.getElementById(`weight${newinput[index].id}`)) {

                                var input1 = document.getElementById(`weight${newinput[index].id}`);
                                input1.value = newinput[index].weight

                            };
                        }
                    }
                }

                function myFunction(id) {

                    // let btnError = false
                    let errorElement = document.getElementById('error' + id)
                    // get the value of the input
                    const targetValue = document.getElementById("stock" + id).value

                    // make sure the value is not empty else stop function execution
                    if (targetValue.trim().length === 0) {
                        return
                    }

                    // check whether then name is acceptable
                    if (is_valid_datalist_value('datalist-search', targetValue)) {
                        errorElement.innerText = ' '

                        // check whether there is a similar stock name
                        // loop through all existing names and compare their values
                        for (let i = 0; i < nimeId; i++) {
                            if (id === i) {
                                continue
                            }
                            // if the element exists
                            if (document.getElementById("stock" + i)) {
                                // check whether its value is the same as the current value
                                if (document.getElementById("stock" + i).value === targetValue) {
                                    // alert the user
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Oops...',
                                        text: 'You cannot add two stocks of the same name!',
                                        footer: '<a href="">Why do I have this issue?</a>'
                                    })

                                    // set error on elements
                                    errorElement.innerText = 'Repeated Name'
                                    // set the error to true
                                    // btnError = true
                                }
                            }
                        }
                    }
                    else { // name not acceptable
                        // set error message below input
                        errorElement.innerText = 'Invalid Name'
                        // set the error to true
                        // btnError = true
                    }

                    // set button enable/disable
                    // handleBtnDisable(btnError)
                }

                // function handleBtnDisable(btnError) {
                //   let btn = document.getElementById('calcbutton')
                //   // if there is an error, disable button
                //   if (btnError) {
                //     btn.setAttribute('disabled', '')
                //   }
                //   // else enable the button
                //   else {
                //     btn.removeAttribute('disabled')
                //   }
                // }

                function is_valid_datalist_value(idDataList, inputValue) {
                    var option = document.querySelector("#" + idDataList + " option[value='" + inputValue + "']");
                    if (option !== null) {
                        return option.value.length > 0;
                    }
                    return false;
                }

                // form on submit function
                function submitIndex(e) {
                    let isAnError = false
                    var sum = 0

                    newinput.map(function (input) {
                        sum = sum + input.weight
                    })

                    if (sum !== 100) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'The Sum of Weights Must be equal to 100!',
                            footer: ''
                        });
                        e.preventDefault()
                        e.stopPropagation()
                        return
                    }
                    // else {
                    //   $("#centermodal").modal('show');
                    // }

                    let indexError = document.getElementById('iError')
                    console.log(indexError.innerText)

                    if (indexError.innerText.trim().length > 0) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'Index Name Already Exists, Please Change!',
                            footer: ''
                        });
                        e.preventDefault()
                        e.stopPropagation()
                        return
                    }
                    // myFunction() already checks for invalid names
                    // for every invalid name, an error component with id: error# exists
                    // during form submission, check should be for any existing error# with text

                    // loop through all existing ids while checking for error messages
                    for (let i = 0; i < nimeId; i++) {
                        let targetError = document.getElementById('error' + i)

                        // check whether it has the invalid message 
                        if (targetError.innerText.trim().length > 0) {
                            isAnError = true
                            break
                        }
                    }

                    if (isAnError) {
                        e.preventDefault()
                        e.stopPropagation()
                        // alert the user
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'Form Error! Please check for repeated or invalid stock names',
                            footer: '<a href="">Why do I have this issue?</a>'
                        })
                    }
                    else {
                        $("#centermodal").modal('show');
                    }
                }

                function getweight() {
                    //get sum of all weight whose edited  = False
                    var sum = 0
                    var counter = 0
                    newinput.filter(function (input) {
                        if (!input.edited) {
                            sum = sum + input.weight
                            counter = counter + 1
                        }
                    })
                    //distributed weight = result / number of weight whose edited value = False
                    var distweight = sum / counter
                    // console.log(distweight)

                    //populate distributed weight onto wweight property of inputs whose edited values = False
                    for (let index = 0; index < newinput.length; index++) {
                        if (!newinput[index].edited) {
                            newinput[index].weight = distweight
                        };
                    }

                    for (let index = 0; index < newinput.length; index++) {
                        if (document.getElementById(`weight${newinput[index].id}`)) {

                            var input1 = document.getElementById(`weight${newinput[index].id}`);
                            input1.value = newinput[index].weight

                        };
                    }
                }

                function handleweightinputonchange(idToChange) {
                    //Get element with Id to change
                    //Get input value
                    var changedvalue = parseFloat(document.getElementById(idToChange).value);
                    //Modify edited and weight properties to True and Input value

                    for (let index = 0; index < newinput.length; index++) {
                        // check if weight id matches idToChange
                        if ((`weight${newinput[index].id}`) === idToChange) {
                            newinput[index].weight = changedvalue
                            newinput[index].edited = true
                        };
                    }

                    //Get sum of all inputs with edited value True
                    var sum = 0
                    var counter = 0

                    newinput.filter(function (input) {
                        if (input.edited) {
                            sum = sum + input.weight
                        }
                        else {
                            counter = counter + 1
                        }
                    })

                    //Get 100 - sum
                    var remweight = 100 - sum

                    //Difference / all inputs with edited value False 
                    var distweight = remweight / counter

                    for (let index = 0; index < newinput.length; index++) {
                        if (!newinput[index].edited) {
                            newinput[index].weight = distweight
                        };
                    }

                    //Populate all with values 
                    for (let index = 0; index < newinput.length; index++) {
                        for (let index = 0; index < newinput.length; index++) {
                            if (document.getElementById(`nime${newinput[index].id}`)) {

                                var input1 = document.getElementById(`weight${newinput[index].id}`);
                                input1.value = newinput[index].weight;
                            };
                        }
                    }
                }

                function enable_weigths() {
                    let elements = document.getElementsByName("form-control form-control-user")
                    Array.prototype.forEach.call(elements, function (el) {
                        if (el.readonly) el.readonly = false
                    });
                }

                // search functionality starts
                var stock_list = {{ stocks| safe }};

                var index_list = {{ indexes| safe}};

                var index_dict_list = index_list.map(x => {
                    return ({ "name": x, "symbol": "" });
                });
                var suggestion_list = index_dict_list.concat(stock_list);
                // console.log(suggestion_list)
                //var list_group_results = document.getElementById("list-group-search-result");

                var result_elements_collection = document.getElementsByClassName("datalist-option");
                var result_array = [].slice.call(result_elements_collection);

                var search_stocks_elements = document.getElementsByClassName("form-control form-control-user")

                Array.prototype.forEach.call(search_stocks_elements, function (el) {
                    let result = el.name.includes("StockName");
                    if (result) search_stocks.push(el.id)
                });

                $(document).ready(function () {
                    $("#top-search").on("keyup", function () {
                        var value = $(this).val().toLowerCase();
                        var filteredArray = suggestion_list.filter((element) => {

                            return element.symbol.toLowerCase().startsWith(value.toLowerCase()) || element.name.toLowerCase().startsWith(value.toLowerCase());
                        });

                        if (filteredArray.length > 3) {
                            for (var i = 0; i < 4; i++) {
                                if (filteredArray[i].symbol != "") {
                                    result_array[i].value = filteredArray[i].name + " (" + filteredArray[i].symbol + ")"
                                }
                                else result_array[i].value = filteredArray[i].name

                            }
                        }
                    });
                });

                function indexListCheck(id) {
                    const cValue = document.getElementById(id).value
                    let targetError = document.getElementById('iError')

                    const result = index_dict_list.find((item) =>
                        item.name.toLowerCase() === cValue.toLowerCase()
                    )

                    // console.log('result', result)
                    if (result !== undefined && result !== null) {
                        targetError.innerText = 'Name already taken'
                    }
                    else {
                        targetError.innerText = ''
                    }

                }

                function mySearch(id) {
                    // get the value of the input
                    var value = document.getElementById(id).value.toLowerCase();
                    // console.log(value)

                    var filteredArray = stock_list.filter((element) => {

                        return element.symbol.toLowerCase().startsWith(value.toLowerCase()) || element.name.toLowerCase().startsWith(value.toLowerCase());
                    });

                    // format the list to display
                    if (filteredArray.length > 3) {
                        for (var i = 0; i < 4; i++) {
                            if (filteredArray[i].symbol != "") {
                                result_array[i].value = filteredArray[i].name + " (" + filteredArray[i].symbol + ")"
                            }
                            else result_array[i].value = filteredArray[i].name
                        }
                    }
                }

            </script>
            <!-- Footer Start -->
            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            <script>document.write(new Date().getFullYear())</script> © PortfolioMeiseter
                        </div>
                        <div class="col-md-6">
                            <div class="text-md-end footer-links d-none d-md-block">
                                <a href="/landing.html">About</a>
                                <a href="/contact">Support</a>
                                <a href="/contact">Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <!-- end Footer -->

    <!-- ============================================================== -->
    <!-- End Page content -->
    <!-- ============================================================== -->

    <!-- END wrapper -->

    <!-- bundle -->
    <script src="assets/js/vendor.min.js"></script>
    <script src="assets/js/app.min.js"></script>

    <!-- third party js -->

    <script src="assets/js/vendor/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="assets/js/vendor/jquery-jvectormap-world-mill-en.js"></script>
    <!-- third party js ends -->

    <!-- demo app -->
    <script src="assets/js/pages/demo.dashboard.js"></script>
    <!-- end demo js-->
    <!-- Datatables js -->
    <script src="assets/js/vendor/jquery.dataTables.min.js"></script>
    <script src="assets/js/vendor/dataTables.bootstrap5.js"></script>
    <script src="assets/js/vendor/dataTables.responsive.min.js"></script>
    <script src="assets/js/vendor/responsive.bootstrap5.min.js"></script>

    <!-- Datatable Init js -->
    <script src="/assets/js/pages/demo.datatable-init.js"></script>

    <!--Required for any Buttons to appear-->
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/dataTables.buttons.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.html5.js"></script>

    <!--If Print button or buttons:true, this is required for any Buttons or Dom items to appear -->
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.print.js"></script>

    <!--Required for Excel button to appear-->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.js"></script>
    <!--Required for PDF button to appear-->
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.js"></script>


    <!--Optional, breaks formatting on butons if jqueryui is used but this is not included-->
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.jqueryui.js"></script>

</body>

</html>